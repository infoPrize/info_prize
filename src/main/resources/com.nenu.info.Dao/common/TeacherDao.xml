<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.nenu.info.Dao.common.TeacherDao">

    <select id="countAll" resultType="Integer">
        SELECT COUNT(*) FROM `t_teacher`
    </select>

    <select id="selectTeacherByName" resultType="com.nenu.info.common.entities.Teacher">
        SELECT * FROM `t_teacher`
        WHERE `teacher_name` = #{teacherName}
    </select>

    <select id="selectTeacherById" resultType="com.nenu.info.common.entities.Teacher">
        SELECT * FROM `t_teacher`
        WHERE `id` = #{id}
    </select>

    <insert id="add" parameterType="com.nenu.info.common.entities.Teacher">
        INSERT INTO `t_teacher`
        (`teacher_name`, `teacher_level`, `phone`)
        VALUES
        (#{teacher.teacherName}, #{teacher.teacherLevel}, #{teacher.phone})
    </insert>

    <select id="listAll" resultType="com.nenu.info.common.dto.common.TeacherDto">
        SELECT
            tt.`teacher_name` AS teacherName,
            (SELECT ttl.`level` FROM `t_teacher_level` ttl WHERE tt.`teacher_level` = ttl.`id`) AS teacherLevel,
            tt.`phone` AS phone
        FROM `t_teacher` tt
    </select>
</mapper>